{"version":3,"sources":["webpack://datavizhub-tuos/./src/templates/blog/blogTemplate.jsx","webpack://datavizhub-tuos/./src/utils/hooks/backgroundMovement.jsx"],"names":["allMdx","data","pageContext","useState","tagMenu","toggleTagMenu","handleTagMenu","screen","width","document","querySelector","scrollIntoView","backgroundMovement","title","keywords","description","className","currentPage","id","style","background","Bg","backgroundPosition","backgroundSize","backgroundAttachment","cascade","top","delay","textShadow","maxWidth","Link","to","pageType","elementId","parent","xFactor","yFactor","x","y","location","setLocation","getTranslateValues","useCallback","element","getComputedStyle","matrix","transform","MozTransform","undefined","matArr","replace","split","parseInt","useEffect","onMouseMove","event","xMove","clientX","yMove","clientY","translateValues","transition","hoverElement","parentElement","addEventListener","left","removeEventListener"],"mappings":"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","file":"component---src-templates-blog-blog-template-jsx-e592f9d2a97c23801bd4.js","sourcesContent":["import React, { useState } from \"react\";\nimport { graphql, Link } from \"gatsby\";\nimport BlogLayout from \"../../components/blog/blogLayout\";\nimport MenuCategory from \"../../components/blog/menuCategory\";\nimport PropTypes from \"prop-types\";\nimport SEO from \"../../components/shared/seo\";\nimport Flip from \"react-reveal/Flip\";\nimport { GreyButton } from \"../../components/style/styleComponent\";\nimport Bg from \"../../images/blog/colorful-world.jpg\";\nimport { backgroundMovement } from \"../../utils/hooks/backgroundMovement\";\n\nconst blogTemplate = ({ data: { allMdx }, pageContext }) => {\n  const [tagMenu, toggleTagMenu] = useState(false);\n\n  function handleTagMenu() {\n    toggleTagMenu(!tagMenu);\n\n    if (screen.width <= 1280 && tagMenu === false) {\n      var element = document.querySelector(\"#tagMenu\");\n      element.scrollIntoView();\n    }\n  }\n\n  backgroundMovement(\"blogBackground\");\n\n  return (\n    <>\n      <SEO\n        title=\"Blog\"\n        keywords={[\n          \"the university of sheffield\",\n          \"data visualisation\",\n          \"data visualisation hub\",\n          \"research\",\n          \"Blog\"\n        ]}\n        description=\"Blog posts, tutorials, and articles at Dataviz.Shef.\"\n      />\n      {/* Height={`${pageContext.currentPage != 1 ? `50vh` : ``}`} */}\n      <div\n        className={`${\n          pageContext.currentPage != 1 ? \"min-h-60\" : \"min-h-100\"\n        } w-full overflow-hidden flex flex-col items-center justify-center text-center relative z-10`}\n      >\n        <div\n          id=\"blogBackground\"\n          className=\"absolute top-0 left-0 w-full h-full transform scale-110\"\n          style={{\n            background: `linear-gradient(0deg, rgba(255, 255, 255, 0.70), rgba(255, 255, 255, 0.70)), url(${Bg})`,\n            backgroundPosition: \"center\",\n            backgroundSize: \"cover\",\n            backgroundAttachment: \"fixed\"\n          }}\n        ></div>\n\n        <Flip cascade top delay={700}>\n          <div\n            className=\"text-black\"\n            style={{ textShadow: \"#fff 0px 0px 5px\" }}\n          >\n            <h1 className=\"text-6xl font-extrabold\">Blog</h1>\n            <p\n              className=\"text-md font-semibold mt-5 px-5\"\n              style={{ maxWidth: \"500px\" }}\n            >\n              &ldquo;The greatest value of a picture is when it forces us to\n              notice what we never expected to see.&rdquo; - John W. Tukey\n            </p>\n          </div>\n        </Flip>\n        <Flip cascade top delay={700}>\n          <div className={`${pageContext.currentPage !== 1 ? \"hidden\" : \"\"}`}>\n            <MenuCategory\n              pageContext={pageContext}\n              handleTagMenu={handleTagMenu}\n              tagMenu={tagMenu}\n            />\n            <div className=\"mt-10\">\n              <Link to=\"/blog#read\">\n                <GreyButton className=\"text-sm bg-gray-700 text-white hover:bg-black\">\n                  What&apos;s new?\n                </GreyButton>\n              </Link>\n            </div>\n          </div>\n        </Flip>\n      </div>\n\n      {/* blog posts & tag menu */}\n      <BlogLayout\n        allMdx={allMdx}\n        pageContext={pageContext}\n        pageType={\"/blog\"}\n        handleTagMenu={handleTagMenu}\n        tagMenu={tagMenu}\n      />\n    </>\n  );\n};\n\nexport default blogTemplate;\n\nblogTemplate.propTypes = {\n  pageContext: PropTypes.any,\n  data: PropTypes.any\n};\n\nexport const query = graphql`\n  query blogList($skip: Int!, $limit: Int!) {\n    allMdx(\n      filter: { frontmatter: { type: { eq: null }, published: { ne: false } } }\n      sort: { fields: [frontmatter___date], order: DESC }\n      limit: $limit\n      skip: $skip\n    ) {\n      edges {\n        node {\n          id\n          frontmatter {\n            ...MdxFrontmatter\n          }\n          fields {\n            ...MdxFields\n          }\n        }\n      }\n    }\n  }\n`;\n","import { useState, useEffect, useCallback } from 'react';\n\n/**  \n* Move background on mouse movement\n* @elementId string: background element\n* @parent boolean: whether to move background on mouse hovering parent element of 'elementId'\n* Make sure to add the style overflow: hidden to parent/element, and add the style transform: scale(1.1) to the element\n*/\nexport function backgroundMovement(elementId, parent = true, xFactor = 0.06, yFactor = 0.05) {\n  const [location, setLocation] = useState({ x: 0, y: 0 });\n  //const xLocation = useRef(0);\n  //const yLocation = useRef(0);\n\n\n  const getTranslateValues = useCallback((element) => {\n    const style = getComputedStyle(element);\n    const matrix = style.transform || style.MozTransform;\n\n    if ( typeof matrix == undefined || !matrix || matrix == 'none') {\n      return {\n        x: 0,\n        y: 0\n      }\n    }\n\n    const matArr = matrix.replace(/[^0-9\\-.,]/g, '').split(',');\n    // 3D: index 12 and 13\n    // 2D: index 4 and 5\n    return {\n      x: parseInt(matArr[12]) || parseInt(matArr[4]),\n      y: parseInt(matArr[13]) || parseInt(matArr[5])\n    }\n  })\n\n\n  useEffect(\n    () => {\n      const onMouseMove = (event) => {\n        // calculate mouse movement\n        let xMove = event.clientX - location.x;\n        let yMove = event.clientY - location.y;\n\n        // update mouse location\n        setLocation({ x: event.clientX, y:event.clientY });\n        // xLocation.current = event.clientX;\n        // yLocation.current = event.clientY;\n        \n        // move background according to difference\n        let translateValues = getTranslateValues(background);\n        background.style.transform = `translate(${-xFactor * xMove + translateValues.x}px, ${-yFactor * yMove + translateValues.y}px) scale(1.1)`;\n      }; \n\n      var background = document.querySelector(`#${elementId}`);\n      if (!background) {\n        return;\n      }\n      background.style.transition = \"none\";\n      var hoverElement = background;\n\n      if (parent === true) {\n        hoverElement = background.parentElement;\n      }\n      \n      hoverElement.addEventListener(\"mousemove\", onMouseMove);\n      hoverElement.addEventListener(\"mouseleave\", () => {\n        background.style.transition = \".5s ease\";\n        background.style.top = 0;\n        background.style.left = 0;\n      });\n\n      // Remove event listeners on cleanup\n      return () => {\n        if (background) {\n          hoverElement.removeEventListener(\"mousemove\", onMouseMove);\n          hoverElement.removeEventListener(\"mouseleave\", () => {\n            background.style.transition = \"none\";\n          });\n        }\n      };\n    },\n    [location, getTranslateValues]\n  );\n  return location;\n}"],"sourceRoot":""}